{% comment %}
  Announcement Bar
  Scrolling or static message banner
{% endcomment %}

{% if section.settings.show_announcement %}
  <div
    class="announcement-bar"
    style="background-color: {{ section.settings.background_color }}; color: {{ section.settings.text_color }};"
  >
    <div class="announcement-bar__content">
      {% if section.settings.enable_scroll %}
        <div class="announcement-bar__scroll" data-announcement-scroll>
          {% for i in (1..3) %}
            <span class="announcement-bar__text">
              {% if section.settings.link != blank %}
                <a href="{{ section.settings.link }}">{{ section.settings.text }}</a>
              {% else %}
                {{ section.settings.text }}
              {% endif %}
              <span class="announcement-bar__separator">&#8226;</span>
            </span>
          {% endfor %}
        </div>
      {% else %}
        <p class="announcement-bar__text">
          {% if section.settings.link != blank %}
            <a href="{{ section.settings.link }}">{{ section.settings.text }}</a>
          {% else %}
            {{ section.settings.text }}
          {% endif %}
        </p>
      {% endif %}
    </div>
  </div>
{% endif %}

{% stylesheet %}
  .announcement-bar {
    position: relative;
    overflow: hidden;
    padding: var(--space-2) var(--page-margin);
  }

  .announcement-bar__content {
    display: flex;
    justify-content: center;
  }

  .announcement-bar__text {
    font-size: var(--text-xs);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    white-space: nowrap;
  }

  .announcement-bar__text a {
    color: inherit;
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  .announcement-bar__text a:hover {
    opacity: 0.8;
  }

  .announcement-bar__separator {
    margin: 0 var(--space-6);
    opacity: 0.5;
  }

  /* Scrolling animation */
  .announcement-bar__scroll {
    display: flex;
    animation: scroll-left 20s linear infinite;
  }

  @keyframes scroll-left {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-33.333%);
    }
  }

  .announcement-bar__scroll:hover {
    animation-play-state: paused;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Announcement Bar",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_announcement",
      "label": "Show announcement",
      "default": true
    },
    {
      "type": "text",
      "id": "text",
      "label": "Text",
      "default": "FREE SHIPPING ON ORDERS OVER $100"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link"
    },
    {
      "type": "checkbox",
      "id": "enable_scroll",
      "label": "Enable scrolling",
      "default": true
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#FF3D00"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#FFFFFF"
    }
  ]
}
{% endschema %}
